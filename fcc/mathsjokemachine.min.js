function handleClientLoad(){gapi.load("client:auth2",initClient)}function initClient(){gapi.client.init({discoveryDocs:DISCOVERY_DOCS,clientId:CLIENT_ID,scope:SCOPES}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus),updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get()),authorizeButton.onclick=handleAuthClick,signoutButton.onclick=handleSignoutClick})}function updateSigninStatus(e){e?loadJokesIntoMemory():(authorizeButton.style.display="block",signoutButton.style.display="none")}function handleAuthClick(e){gapi.auth2.getAuthInstance().signIn()}function handleSignoutClick(e){gapi.auth2.getAuthInstance().signOut()}function loadJokesIntoMemory(){gapi.client.sheets.spreadsheets.values.get({spreadsheetId:"1rulgef2EIt_2wLpuPTuLvLgP-ZzEmebRIKOzmMqiKHg",range:"MathsJokeList!B2:D"}).then(function(e){mathsjokeList=e.result.values,nJokes=e.result.values.length,nJokes>0?document.getElementById("nJokes").innerText=nJokes:document.getElementById("nJokesParagraph").innerText="This Maths Joke Machine is currently busted!",document.getElementById("initialButton").style.display="inline"},function(e){document.getElementById("nJokesParagraph").innerText="This Maths Joke Machine is currently busted!",console.log("Error: "+e.result.error.message)})}function generateJoke(){document.getElementById("intro").style.display="none",document.getElementById("mathsJoke").style.display="block",document.getElementById("initialButton").style.display="none",document.getElementById("cantTweet").style.display="none",jokeNumber=Math.floor(Math.random()*nJokes),document.getElementById("jokeQuestion").innerText=mathsjokeList[jokeNumber][0],void 0!==mathsjokeList[jokeNumber][1]?document.getElementById("jokeAnswer").innerText=mathsjokeList[jokeNumber][1]:document.getElementById("jokeAnswer").innerText="",void 0!==mathsjokeList[jokeNumber][2]?document.getElementById("jokeExplanationText").innerText=mathsjokeList[jokeNumber][2]:document.getElementById("jokeExplanation").innerText=""}function tweetJoke(){var e=mathsjokeList[jokeNumber][0]+" "+mathsjokeList[jokeNumber][1];if(e.length>140)document.getElementById("cantTweet").style.display="block";else{var t="https://twitter.com/intent/tweet?text="+encodeURIComponent(e);window.open(t,"_blank")}}var CLIENT_ID="751459220695-q93iap2b4hbn0j08jv3pb7h1lms4mkel.apps.googleusercontent.com",DISCOVERY_DOCS=["https://sheets.googleapis.com/$discovery/rest?version=v4"],SCOPES="https://www.googleapis.com/auth/spreadsheets.readonly",authorizeButton=document.getElementById("authorize-button"),signoutButton=document.getElementById("signout-button"),mathsjokeList,nJokes,jokeNumber;